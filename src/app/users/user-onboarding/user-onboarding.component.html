<div class="flex flex-col items-center justify-center min-h-screen p-4">
  <mat-vertical-stepper
    #stepper
    [linear]="true"
    animationDuration="1000"
    class="shadow-bg rounded-lg z-0"
  >
    <mat-step [stepControl]="nameForm">
      <form [formGroup]="nameForm">
        <ng-template matStepLabel>ƒêi·ªÅn t√™n c·ªßa b·∫°n</ng-template>
        <mat-form-field class="w-full max-w-md">
          <mat-label>T√™n</mat-label>
          <input matInput formControlName="firstName" required />
          <mat-error *ngIf="nameForm.get('firstName')?.hasError('required')">
            Vui l√≤ng nh·∫≠p t√™n
          </mat-error>
        </mat-form-field>
        <div class="mt-4">
          <button
            mat-button
            matStepperNext
            [disabled]="nameForm.invalid || isLoading"
            (click)="submitName()"
          >
            Ti·∫øp theo
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="emailForm">
      <form [formGroup]="emailForm">
        <ng-template matStepLabel>ƒêi·ªÅn email c·ªßa b·∫°n</ng-template>
        <mat-form-field class="w-full max-w-md">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" required />
          <mat-error *ngIf="emailForm.get('email')?.hasError('required')">
            Vui l√≤ng nh·∫≠p email
          </mat-error>
          <mat-error *ngIf="emailForm.get('email')?.hasError('email')">
            Email kh√¥ng h·ª£p l·ªá
          </mat-error>
        </mat-form-field>
        <div class="mt-4">
          <button mat-button matStepperPrevious>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="30"
              height="30"
              viewBox="0 0 24 24"
            >
              <g
                fill="none"
                stroke="#fff"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
              >
                <path
                  stroke-dasharray="64"
                  stroke-dashoffset="64"
                  d="M21 12c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9Z"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    dur="0.6s"
                    values="64;0"
                  />
                </path>
                <path
                  stroke-dasharray="12"
                  stroke-dashoffset="12"
                  d="M17 12h-9.5"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    begin="0.7s"
                    dur="0.2s"
                    values="12;0"
                  />
                </path>
                <path
                  stroke-dasharray="8"
                  stroke-dashoffset="8"
                  d="M7 12l4 4M7 12l4 -4"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    begin="0.9s"
                    dur="0.2s"
                    values="8;0"
                  />
                </path>
              </g>
            </svg>
          </button>
          <button
            mat-button
            matStepperNext
            [disabled]="emailForm.invalid || isLoading"
            (click)="submitEmail()"
          >
            Ti·∫øp theo
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="codeForm">
      <form [formGroup]="codeForm">
        <ng-template matStepLabel>Nh·∫≠p m√£ x√°c minh</ng-template>
        <mat-form-field class="w-full max-w-md">
          <mat-label>M√£ x√°c minh</mat-label>
          <input matInput formControlName="code" required />
          <mat-error *ngIf="codeForm.get('code')?.hasError('required')">
            Vui l√≤ng nh·∫≠p m√£
          </mat-error>
          <mat-error *ngIf="codeForm.get('code')?.hasError('pattern')">
            M√£ ph·∫£i l√† 6 ch·ªØ s·ªë
          </mat-error>
        </mat-form-field>
        <div class="mt-4 flex gap-2">
          <button mat-button matStepperPrevious>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="30"
              height="30"
              viewBox="0 0 24 24"
            >
              <g
                fill="none"
                stroke="#fff"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
              >
                <path
                  stroke-dasharray="64"
                  stroke-dashoffset="64"
                  d="M21 12c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9Z"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    dur="0.6s"
                    values="64;0"
                  />
                </path>
                <path
                  stroke-dasharray="12"
                  stroke-dashoffset="12"
                  d="M17 12h-9.5"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    begin="0.7s"
                    dur="0.2s"
                    values="12;0"
                  />
                </path>
                <path
                  stroke-dasharray="8"
                  stroke-dashoffset="8"
                  d="M7 12l4 4M7 12l4 -4"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    begin="0.9s"
                    dur="0.2s"
                    values="8;0"
                  />
                </path>
              </g>
            </svg>
          </button>
          <button
            mat-button
            [disabled]="codeForm.invalid || isLoading"
            (click)="submitCode()"
          >
            X√°c minh
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step class="">
      <ng-template matStepLabel>Ho√†n t·∫•t</ng-template>
      <p class="text-center text-lg my-text-succes congrats">
        üéâ Xin ch√∫c m·ª´ng, d·ªãch v·ª• tin t·ª©c ƒë√£ c√≥ s·∫µn cho b·∫°n. üéÅ
      </p>
    </mat-step>
  </mat-vertical-stepper>
  <div *ngIf="isLoading" class="text-center my-4">
    <mat-spinner diameter="40"></mat-spinner>
  </div>
  <div *ngIf="errorMessage" class="text-red-500 mt-2">{{ errorMessage }}</div>
</div>
