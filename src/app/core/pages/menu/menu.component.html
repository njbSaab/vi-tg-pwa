<!-- src/app/core/pages/menu/menu.component.html -->

<section class="menu-page flex flex-col items-center h-screen justify-between">
  <div class="menu-posts overflow-hidden h-[68dvh] w-full">
    <div class="container content-w menu-post-inner">
      <div class="title-group text-snow text-center p-2 text-xl">
        üëã {{ nameUser }} - email: {{ email }}
      </div>
      <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
      <div *ngIf="errorMessage" class="error text-red-500 text-center p-4">
        {{ errorMessage }}
      </div>

      <div class="post-wrapper">
        <div *ngIf="!selectedPost">
          <!-- title-group -->
          <div
            *ngIf="greetings.length > 0"
            class="card bg-base-100 mx-auto shadow-bg"
          >
            <figure *ngIf="greetings[1].image_url">
              <img
                [src]="greetings[1].image_url"
                alt="Greeting Image"
                class="object-cover"
              />
            </figure>
            <div class="card-body">
              <h2 class="card-title justify-center text-2xl">
                {{ greetings[1].title_for_client || "Th√¥ng ƒëi·ªáp ch√†o" }}
                <div class="badge badge-secondary">NEW</div>
              </h2>
              <p [innerText]="greetings[1].greeting_text" class="text-sm"></p>
            </div>
          </div>
        </div>
      </div>
      <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞ -->
      <div class="post-wrapper">
        <div
          *ngIf="selectedPost"
          class="flex flex-col justify-center gap-4 mb-4"
        >
          <div class="card bg-base-200 mx-auto shadow-bg">
            <figure *ngIf="selectedPost.post_image_url">
              <img
                [src]="selectedPost.post_image_url"
                alt="Post Image"
                class="object-cover"
              />
            </figure>
            <div class="card-body">
              <h2 class="card-title justify-center text-2xl">
                {{
                  selectedPost.title_for_client ||
                    selectedPost.post_title ||
                    "–ü–æ—Å—Ç"
                }}
                <div class="badge badge-secondary">NEW</div>
              </h2>
              <p [innerText]="selectedPost.post_content" class="text-sm"></p>
              <!-- –ö–Ω–æ–ø–∫–∏ –ø–æ—Å—Ç–∞ -->
              <div
                *ngIf="selectedPost.buttons?.length"
                class="flex flex-wrap gap-2 mt-2"
              >
                <a
                  *ngFor="let button of selectedPost.buttons"
                  [href]="button.button.url || '#'"
                  class="button button-main hover-success cursor-pointer"
                  target="_blank"
                >
                  {{ button.button.name || "–ö–Ω–æ–ø–∫–∞" }}
                </a>
              </div>
              <div
                *ngIf="!selectedPost.buttons?.length"
                class="text-gray-500 text-sm"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é -->
  <div
    class="py-4 bg-base-100 flex flex-col gap-[10px] w-full shadow-bg card buttons-group"
  >
    <button
      *ngFor="let item of getDisplayedItems()"
      class="button button-main hover-success cursor-pointer px-4 mx-auto"
      [ngClass]="{ 'my-bg-success': lastClickedMenuItemId === item.id }"
      (click)="onMenuItemClick(item.id)"
    >
      {{ item.title_for_client }}
    </button>

    <!-- –ö–Ω–æ–ø–∫–∞ ¬´–í–µ—Ä–Ω—É—Ç—å—Å—è¬ª -->
    <button
      *ngIf="hasBackButton()"
      class="button button-main hover-success cursor-pointer px-4 mx-auto button-back"
      (click)="onBackClick()"
    >
      –í–µ—Ä–Ω—É—Ç—å—Å—è
    </button>
  </div>
</section>
